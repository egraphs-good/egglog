---
source: src/proofs/proof_tests.rs
expression: snapshot
---
(ruleset __parent)
(ruleset __single_parent)
(ruleset __rebuilding)
(ruleset __rebuilding_cleanup)
(ruleset __delete_subsume_ruleset)
(sort Math)
(sort __uf)
(constructor __UF_Math (Math Math) __uf)
(rule ((__UF_Math a b)
       (__UF_Math b c)
       (!= b c))
      ((delete (__UF_Math a b))
       (__UF_Math a c))
        :ruleset __parent :name "__uf_update")
(rule ((__UF_Math a b)
       (__UF_Math a c)
       (!= b c)
       (= (ordering-max b c) b))
      ((delete (__UF_Math a b))
       (__UF_Math b c))
        :ruleset __single_parent :name "singleparent__uf_update")
(sort __view)
(constructor Add (i64 i64) Math)
(constructor __AddView (i64 i64 Math) __view)
(constructor __to_delete_Add (i64 i64) __view)
(constructor __to_subsume_Add (i64 i64) __view)
(rule ((__AddView c0_ c1_ new)
       (__AddView c0_ c1_ old)
       (!= old new)
       (= (ordering-max old new) new))
      ((__UF_Math (ordering-max new old) (ordering-min new old)))
        :ruleset __rebuilding :name "__congruence_rule")
(rule ((__to_delete_Add c0_ c1_)
       (__AddView c0_ c1_ out))
      ((delete (__AddView c0_ c1_ out))
       (delete (__to_delete_Add c0_ c1_)))
        :ruleset __delete_subsume_ruleset :name "__delete_rule")
(rule ((__to_subsume_Add c0_ c1_)
       (__AddView c0_ c1_ out))
      ((subsume (__AddView c0_ c1_ out)))
        :ruleset __delete_subsume_ruleset :name "__delete_rule_subsume")
(rule ((__AddView c0_ c1_ c2_)
       (__UF_Math c2_ __v)
       (!= __v c2_))
      ((__AddView c0_ c1_ __v)
       (delete (__AddView c0_ c1_ c2_)))
        :ruleset __rebuilding :name "__rebuild_rule")
(function __v2 () Math :no-merge)
(set (__v2) (Add 1 2))
(__AddView 1 2 (__v2 ))
(run-schedule (seq (saturate (seq (run __rebuilding_cleanup) (saturate (run __single_parent)) (saturate (run __parent)) (run __rebuilding))) (run __delete_subsume_ruleset)))
(rule ((__AddView a b __v3))
      ((let __v5 (Add a b))
       (__AddView a b __v5)
       (let __v6 (Add b a))
       (__AddView b a __v6)
       (__UF_Math (ordering-max __v5 __v6) (ordering-min __v5 __v6)))
         :name "commutativity")
(check (__AddView 1 2 __v7)
(__AddView 2 1 __v8)
(= __v7 __v8))
(run-schedule (seq (saturate (seq (run __rebuilding_cleanup) (saturate (run __single_parent)) (saturate (run __parent)) (run __rebuilding))) (run __delete_subsume_ruleset)))
