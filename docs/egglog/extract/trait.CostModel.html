<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="An interface for custom cost model."><title>CostModel in egglog::extract - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-916cea96.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="egglog" data-themes="" data-resource-suffix="" data-rustdoc-version="1.87.0 (17067e9ac 2025-05-09)" data-channel="1.87.0" data-search-js="search-e7298875.js" data-settings-js="settings-d72f25bb.js" ><script src="../../static.files/storage-82c7156e.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-fb8c74a8.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-044be391.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../egglog/index.html">egglog</a><span class="version">2.0.0</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Cost<wbr>Model</a></h2><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.enode_cost" title="enode_cost">enode_cost</a></li><li><a href="#tymethod.fold" title="fold">fold</a></li></ul><h3><a href="#provided-methods">Provided Methods</a></h3><ul class="block"><li><a href="#method.base_value_cost" title="base_value_cost">base_value_cost</a></li><li><a href="#method.container_cost" title="container_cost">container_cost</a></li></ul><h3><a href="#implementors">Implementors</a></h3></section><div id="rustdoc-modnav"><h2><a href="index.html">In egglog::<wbr>extract</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../index.html">egglog</a>::<wbr><a href="index.html">extract</a></div><h1>Trait <span class="trait">CostModel</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/egglog/extract.rs.html#16-50">Source</a> </span></div><pre class="rust item-decl"><code>pub trait CostModel&lt;C: <a class="trait" href="trait.Cost.html" title="trait egglog::extract::Cost">Cost</a>&gt; {
    // Required methods
    fn <a href="#tymethod.fold" class="fn">fold</a>(&amp;self, head: &amp;<a class="primitive" href="https://doc.rust-lang.org/1.87.0/std/primitive.str.html">str</a>, children_cost: &amp;<a class="primitive" href="https://doc.rust-lang.org/1.87.0/std/primitive.slice.html">[C]</a>, head_cost: C) -&gt; C;
<span class="item-spacer"></span>    fn <a href="#tymethod.enode_cost" class="fn">enode_cost</a>(
        &amp;self,
        egraph: &amp;<a class="struct" href="../struct.EGraph.html" title="struct egglog::EGraph">EGraph</a>,
        func: &amp;<a class="struct" href="../struct.Function.html" title="struct egglog::Function">Function</a>,
        row: &amp;<a class="struct" href="../struct.FunctionRow.html" title="struct egglog::FunctionRow">FunctionRow</a>&lt;'_&gt;,
    ) -&gt; C;

    // Provided methods
    fn <a href="#method.container_cost" class="fn">container_cost</a>(
        &amp;self,
        egraph: &amp;<a class="struct" href="../struct.EGraph.html" title="struct egglog::EGraph">EGraph</a>,
        sort: &amp;<a class="type" href="../type.ArcSort.html" title="type egglog::ArcSort">ArcSort</a>,
        value: <a class="struct" href="../struct.Value.html" title="struct egglog::Value">Value</a>,
        element_costs: &amp;<a class="primitive" href="https://doc.rust-lang.org/1.87.0/std/primitive.slice.html">[C]</a>,
    ) -&gt; C { ... }
<span class="item-spacer"></span>    fn <a href="#method.base_value_cost" class="fn">base_value_cost</a>(
        &amp;self,
        egraph: &amp;<a class="struct" href="../struct.EGraph.html" title="struct egglog::EGraph">EGraph</a>,
        sort: &amp;<a class="type" href="../type.ArcSort.html" title="type egglog::ArcSort">ArcSort</a>,
        value: <a class="struct" href="../struct.Value.html" title="struct egglog::Value">Value</a>,
    ) -&gt; C { ... }
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>An interface for custom cost model.</p>
<p>To use it with the default extractor, the cost type must also satisfy <code>Ord + Eq + Clone + Debug</code>.
Additionally, the cost model should guarantee that a term has a no-smaller cost
than its subterms to avoid cycles in the extracted terms for common case usages.
For more niche usages, a term can have a cost less than its subterms.
As long as there is no negative cost cycle,
the default extractor is guaranteed to terminate in computing the costs.
However, the user needs to be careful to guarantee acyclicity in the extracted terms.</p>
</div></details><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.fold" class="method"><a class="src rightside" href="../../src/egglog/extract.rs.html#18">Source</a><h4 class="code-header">fn <a href="#tymethod.fold" class="fn">fold</a>(&amp;self, head: &amp;<a class="primitive" href="https://doc.rust-lang.org/1.87.0/std/primitive.str.html">str</a>, children_cost: &amp;<a class="primitive" href="https://doc.rust-lang.org/1.87.0/std/primitive.slice.html">[C]</a>, head_cost: C) -&gt; C</h4></section></summary><div class="docblock"><p>The total cost of a term given the cost of the root e-node and its immediate children’s total costs.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.enode_cost" class="method"><a class="src rightside" href="../../src/egglog/extract.rs.html#21">Source</a><h4 class="code-header">fn <a href="#tymethod.enode_cost" class="fn">enode_cost</a>(
    &amp;self,
    egraph: &amp;<a class="struct" href="../struct.EGraph.html" title="struct egglog::EGraph">EGraph</a>,
    func: &amp;<a class="struct" href="../struct.Function.html" title="struct egglog::Function">Function</a>,
    row: &amp;<a class="struct" href="../struct.FunctionRow.html" title="struct egglog::FunctionRow">FunctionRow</a>&lt;'_&gt;,
) -&gt; C</h4></section></summary><div class="docblock"><p>The cost of an enode (without the cost of children)</p>
</div></details></div><h2 id="provided-methods" class="section-header">Provided Methods<a href="#provided-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="method.container_cost" class="method"><a class="src rightside" href="../../src/egglog/extract.rs.html#26-39">Source</a><h4 class="code-header">fn <a href="#method.container_cost" class="fn">container_cost</a>(
    &amp;self,
    egraph: &amp;<a class="struct" href="../struct.EGraph.html" title="struct egglog::EGraph">EGraph</a>,
    sort: &amp;<a class="type" href="../type.ArcSort.html" title="type egglog::ArcSort">ArcSort</a>,
    value: <a class="struct" href="../struct.Value.html" title="struct egglog::Value">Value</a>,
    element_costs: &amp;<a class="primitive" href="https://doc.rust-lang.org/1.87.0/std/primitive.slice.html">[C]</a>,
) -&gt; C</h4></section></summary><div class="docblock"><p>The cost of a container value given the costs of its elements.</p>
<p>The default cost for containers is just the sum of all the elements inside</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.base_value_cost" class="method"><a class="src rightside" href="../../src/egglog/extract.rs.html#44-49">Source</a><h4 class="code-header">fn <a href="#method.base_value_cost" class="fn">base_value_cost</a>(&amp;self, egraph: &amp;<a class="struct" href="../struct.EGraph.html" title="struct egglog::EGraph">EGraph</a>, sort: &amp;<a class="type" href="../type.ArcSort.html" title="type egglog::ArcSort">ArcSort</a>, value: <a class="struct" href="../struct.Value.html" title="struct egglog::Value">Value</a>) -&gt; C</h4></section></summary><div class="docblock"><p>Compute the cost of a (non-container) primitive value.</p>
<p>The default cost for base values is the constant one</p>
</div></details></div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"><section id="impl-CostModel%3Cu64%3E-for-TreeAdditiveCostModel" class="impl"><a class="src rightside" href="../../src/egglog/extract.rs.html#106-124">Source</a><a href="#impl-CostModel%3Cu64%3E-for-TreeAdditiveCostModel" class="anchor">§</a><h3 class="code-header">impl <a class="trait" href="trait.CostModel.html" title="trait egglog::extract::CostModel">CostModel</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.87.0/std/primitive.u64.html">u64</a>&gt; for <a class="struct" href="struct.TreeAdditiveCostModel.html" title="struct egglog::extract::TreeAdditiveCostModel">TreeAdditiveCostModel</a></h3></section></div><script src="../../trait.impl/egglog/extract/trait.CostModel.js" async></script></section></div></main></body></html>