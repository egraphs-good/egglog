(datatype Math
  (Num i64)
  (Var String)
  (Add Math Math)
  (Mul Math Math))


(rewrite (Mul (Num x) (Num y)) (Num (* x y)))

(sort MathFn (Lambda Math Math))

(define one-thunk (lambda (var "x") (Num 1)))

(define one (apply one-thunk (Var "doesnt matter")))

(run 10)
(check (= one (Num 1)))

(define double (lambda (var "y") (Mul (var "y") (Num 2))))
(run 10)

(define two (apply double one))
(run 10)

(extract two)
(check (= two (Num 2)))
