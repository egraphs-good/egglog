; Test the :term annotation
; :term marks a constructor as non-unionable, meaning values of its output sort cannot be unioned

; Create a sort and a :term constructor
(sort TermSort)
(constructor term-fn (i64 i64) TermSort :term)

; Create some terms - this should succeed
(term-fn 1 2)
(term-fn 3 4)
(term-fn 5 6)

(fail (union (term-fn 1 2) (term-fn 3 4))) ; This should fail because TermSort is marked as :term and thus non-unionable

; Verify all rows exist as separate entries (not unioned)
(check (term-fn 1 2))
(check (term-fn 3 4))
(check (term-fn 5 6))

; Test :term with :cost option
(sort TermSort2)
(constructor term-fn2 (i64) TermSort2 :term :cost 5)
(term-fn2 100)
(check (term-fn2 100))

; Test :term with :unextractable option  
(sort TermSort3)
(constructor term-fn3 (i64) TermSort3 :term :unextractable)
(term-fn3 200)
(check (term-fn3 200))

